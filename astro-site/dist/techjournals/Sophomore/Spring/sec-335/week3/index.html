<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><title>Astro</title><style>body{background-color:#000;color:#0f0;font-family:Courier New,Courier,monospace}a{color:#0f0}
</style></head> <body>  <h1 id="week-3-class-on-2524">Week 3 (Class on 2/5/24)</h1>
<h2 id="awful-terrible-one-liner-for-nmap-dns-discovery">Awful terrible one-liner for NMAP DNS Discovery</h2>
<ul>
<li>Step 1: <code>sudo nmap -Pn 10.0.5.0/24 -p 53 --open -oG dns-servers2.txt</code></li>
<li>Step 2: <code>cat dns-servers2.txt | grep -v Nmap | egrep '[0-9]{2,3}\.' | awk '{split($0,a," "); print a[2]}' | uniq</code> (there’s gotta be a better way! but this works!)</li>
</ul>
<h2 id="script-content">Script content</h2>
<p>Some of the items for this week’s class activity are in my <a href="https://git.goober.cloud/matt/sec335-scripts/src/branch/main/week3/activity3.1">scripts repo</a></p>
<p>The most horrendous of them is <a href="https://git.goober.cloud/matt/sec335-scripts/src/branch/main/week3/activity3.1/nmap_enumerate.sh">nmap enumeration</a></p>
<p>All the variants of DNS enumeration are in that folder.</p>
<h2 id="other-one-line-magic">Other one-line magic</h2>
<p>After doing</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">dig</span><span style="color:#9ECBFF"> axfr</span><span style="color:#9ECBFF"> @nsztm1.digi.ninja</span><span style="color:#9ECBFF"> zonetransfer.me</span><span style="color:#F97583"> >></span><span style="color:#9ECBFF"> zt.txt</span></span>
<span class="line"><span style="color:#6A737D"># and</span></span>
<span class="line"><span style="color:#B392F0">dig</span><span style="color:#9ECBFF"> axfr</span><span style="color:#9ECBFF"> @nsztm2.digi.ninja</span><span style="color:#9ECBFF"> zonetransfer.me</span><span style="color:#F97583"> >></span><span style="color:#9ECBFF"> zt.txt</span></span>
<span class="line"></span></code></pre>
<p>Then I wrote out</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">cat</span><span style="color:#9ECBFF"> zt.txt</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> grep</span><span style="color:#79B8FF"> -v</span><span style="color:#9ECBFF"> ";"</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> egrep</span><span style="color:#9ECBFF"> "\sA\s"</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> awk</span><span style="color:#9ECBFF"> '{print $1" - "$5}'</span></span>
<span class="line"></span></code></pre>
<p>To grab the DNS names and host IPs. It’s not too complicated, but it took me way too long to just use <code>egrep</code> instead of trying to get a conditional to work in pure AWK (sorry to  Brian Kernighan, I tried my best.)</p>
<h2 id="overall">Overall</h2>
<p>DNS enumeration is important to find all of the potential targets in a given IP range and/or under a target domain name.
Combining this with prior recon to find appropriate domain names should give a fairly complete picture of a target profile for a given company/org/govt</p>  </body></html>