<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><title>Astro</title><style>body{background-color:#000;color:#0f0;font-family:Courier New,Courier,monospace}a{color:#0f0}
</style></head> <body>  <h1 id="week-2-class-on-12924">Week 2 (Class on 1/29/24)</h1>
<h2 id="active-recon">Active Recon</h2>
<p>Network scanning, ping, etc</p>
<h2 id="nmap-suggestions">NMAP Suggestions</h2>
<p>Recommendation for multiple targets:</p>
<ol>
<li>Do host discovery and port scanning first</li>
<li>Then perform -sV against specific ports (using <code>-p &#x3C;port_list></code>)</li>
</ol>
<h2 id="21-host-discovery-script-item-2">2.1 Host Discovery Script (Item 2)</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/usr/bin/env bash</span></span>
<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> d </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> $(</span><span style="color:#B392F0">seq</span><span style="color:#79B8FF"> 2</span><span style="color:#79B8FF"> 50</span><span style="color:#E1E4E8">); </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#E1E4E8">        ip</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"10.0.5.</span><span style="color:#E1E4E8">$d</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#B392F0">        ping</span><span style="color:#79B8FF"> -c</span><span style="color:#79B8FF"> 1</span><span style="color:#79B8FF"> -W</span><span style="color:#79B8FF"> 5</span><span style="color:#E1E4E8"> $ip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8"> [[ </span><span style="color:#9ECBFF">"</span><span style="color:#79B8FF">$?</span><span style="color:#9ECBFF">"</span><span style="color:#F97583"> ==</span><span style="color:#9ECBFF"> "0"</span><span style="color:#E1E4E8"> ]]; </span><span style="color:#F97583">then</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">                echo</span><span style="color:#9ECBFF"> "Host </span><span style="color:#E1E4E8">$ip</span><span style="color:#9ECBFF"> is up"</span></span>
<span class="line"><span style="color:#79B8FF">                echo</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$ip</span><span style="color:#9ECBFF">"</span><span style="color:#F97583"> >></span><span style="color:#9ECBFF"> sweep.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">        fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">done</span></span>
<span class="line"></span></code></pre>
<p>Thankfully, the ping command only exits with 0 if it gets back the response it wants, so <code>$?</code> was a godsend for this one.</p>
<h2 id="21-fping-host-discover-one-liner-item-3">2.1 fping Host Discover One-Liner (Item 3)</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> fping</span><span style="color:#79B8FF"> -a</span><span style="color:#79B8FF"> -g</span><span style="color:#79B8FF"> 10.0.5.2</span><span style="color:#79B8FF"> 10.0.5.50</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> grep</span><span style="color:#79B8FF"> --invert-match</span><span style="color:#9ECBFF"> "ICMP"</span><span style="color:#F97583"> >></span><span style="color:#9ECBFF"> sweep2.txt</span></span>
<span class="line"></span></code></pre>
<p>This was a bit silly, but it kept me from needing to use regex yet.</p>
<h2 id="21-nmap-host-discovery-one-liner-item-6">2.1 nmap Host Discovery One-Liner (Item 6)</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> nmap</span><span style="color:#79B8FF"> -sn</span><span style="color:#9ECBFF"> 10.0.5.2-50</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> egrep</span><span style="color:#9ECBFF"> '[0-9]{2,3}\.'</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> awk</span><span style="color:#9ECBFF"> '{n=split($0,a," "); print a[n]}'</span><span style="color:#F97583"> >></span><span style="color:#9ECBFF"> sweep3.txt</span></span>
<span class="line"></span></code></pre>
<p>There is probably a better way to strip away the rest of the nmap output than this awful <code>awk</code> syntax, but it does work.
The AWK script was adapted from <a href="https://stackoverflow.com/a/39703302">this post</a></p>  </body></html>