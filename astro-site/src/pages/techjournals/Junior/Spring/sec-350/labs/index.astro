---
import Layout from '../../../../../../layouts/Layout.astro';
import Navbar from '../../../../../../components/Navbar.astro';

const files = Object.values(import.meta.glob('./*.md', { eager: true }));

function getTitleFromPath(path: string) {
  const parts = path.split('/').filter(Boolean);
  let title = parts[parts.length - 1];
  if (title === 'index.md' || title === 'index.astro') {
    title = parts[parts.length - 2] || 'Home'; // Get parent directory name or 'Home'
  }
  return title.replace(/[-_]/g, ' ').replace(/\.md$/, '').replace(/\.astro$/, '').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
}
---

<Layout>
  <Navbar />
  <h1>Labs</h1>
  <nav>
    <ul>
      {files.map(file => (
        <li>
          <a href={file.url}>
            {file.frontmatter?.title || getTitleFromPath(file.url)}
          </a>
        </li>
      ))}
    </ul>
  </nav>
</Layout>
